import{Q as m}from"./QBtn.1106fff4.js";import{Q}from"./scroll.a8da4cf4.js";import{Q as x,a as y,b as R,c as B,d as L}from"./QLayout.1be02410.js";import{o as S,u as T,at as D,v as I,a8 as N,$ as O,p as s,q as d,w as t,x as o,z as e,a0 as p,a1 as f,a2 as V,a4 as q}from"./index.b7c3ad49.js";import{u as A}from"./auth.3820e33c.js";import{u as H}from"./room.b814678f.js";import{O as U}from"./OverlappingAvatars.99c714a4.js";import{o as j,d as z,c as E}from"./firebase.b163514c.js";import"./QScrollObserver.2a6200a8.js";const F={key:0},M={key:1,class:"flex items-center q-gutter-sm"},P={class:"text-weight-bold"},to=S({__name:"ChatLayout",setup($){var u;const _=T(),c=D(),h=(u=c.params)==null?void 0:u.id,{isLoggedIn:k,handleSignOut:g}=A(),{room:n,fetchRoomData:b,joinRoom:C,chatUsers:v}=H(h);let r=null;const w=a=>{r=j(z(E,a),l=>{if(l.exists()){const i=l.data();n.users=i.users||[]}})};return I(async()=>{const a=c.params.id;await b(),await C(),w(a)}),N(()=>{r&&r()}),(a,l)=>{const i=O("router-view");return s(),d(x,{view:"lHh Lpr lFf"},{default:t(()=>[o(B,null,{default:t(()=>[o(y,{class:"bg-pink-5"},{default:t(()=>[o(m,{icon:"arrow_back",round:"",flat:"",onClick:e(_).back},null,8,["onClick"]),o(R,null,{default:t(()=>[e(n).loading?(s(),p("div",F,[o(Q,{type:"rect",width:"100px"})])):(s(),p("div",M,[f("span",P,V(e(n).name),1),o(U,{users:e(v)},null,8,["users"])]))]),_:1}),f("div",null,[e(k)?(s(),d(m,{key:0,label:"sign out",color:"white","text-color":"negative",onClick:e(g)},null,8,["onClick"])):q("",!0)])]),_:1})]),_:1}),o(L,null,{default:t(()=>[o(i)]),_:1})]),_:1})}}});export{to as default};
