import{A as d,t as o,q as h,u as f,v as p,D as m,E as g}from"./index.31f00e6e.js";import{d as A,a as D,g as k,s as v}from"./firebase.21bf6f1f.js";const x={dark:{type:Boolean,default:null}};function I(t,s){return d(()=>t.dark===null?s.dark.isActive:t.dark)}const i=o(null);function L(){const t=h(),s=f(),u=o(!1),n=o(!1),c=async a=>{const e=A(D,"users",a.uid);(await k(e)).exists()||await v(e,{displayName:a.displayName,photoURL:a.photoURL,rooms:[]})},l=()=>{m(t,async a=>{i.value=a,u.value=!!a,n.value=!0;const e=s.currentRoute.value;a?(await c(a),e.path==="/"&&s.push("/chats")):e.meta.requiresAuth&&s.push("/")})},r=async()=>{await g(t),s.push("/")};return p(()=>{l()}),{isLoggedIn:u,authInitialized:n,user:i,handleSignOut:r}}export{x as a,I as b,i as c,L as u};
